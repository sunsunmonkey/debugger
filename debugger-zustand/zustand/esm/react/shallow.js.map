{"version":3,"file":"shallow.js","sources":["../../../src/vanilla/shallow.ts","../../../src/react/shallow.ts"],"sourcesContent":["export function shallow<T>(objA: T, objB: T) {\n  if (Object.is(objA, objB)) {\n    return true\n  }\n  if (\n    typeof objA !== 'object' ||\n    objA === null ||\n    typeof objB !== 'object' ||\n    objB === null\n  ) {\n    return false\n  }\n\n  if (objA instanceof Map && objB instanceof Map) {\n    if (objA.size !== objB.size) return false\n\n    for (const [key, value] of objA) {\n      if (!Object.is(value, objB.get(key))) {\n        return false\n      }\n    }\n    return true\n  }\n\n  if (objA instanceof Set && objB instanceof Set) {\n    if (objA.size !== objB.size) return false\n\n    for (const value of objA) {\n      if (!objB.has(value)) {\n        return false\n      }\n    }\n    return true\n  }\n\n  const keysA = Object.keys(objA)\n  if (keysA.length !== Object.keys(objB).length) {\n    return false\n  }\n  for (let i = 0; i < keysA.length; i++) {\n    if (\n      !Object.prototype.hasOwnProperty.call(objB, keysA[i] as string) ||\n      !Object.is(objA[keysA[i] as keyof T], objB[keysA[i] as keyof T])\n    ) {\n      return false\n    }\n  }\n  return true\n}\n","// import { useDebugValue } from 'react'\n// That doesnt work in ESM, because React libs are CJS only.\n// The following is a workaround until ESM is supported.\n// eslint-disable-next-line import/extensions\nimport ReactExports from 'react'\nimport { shallow } from '../vanilla/shallow.ts'\n\nconst { useRef } = ReactExports\n\nexport function useShallow<S, U>(selector: (state: S) => U): (state: S) => U {\n  const prev = useRef<U>()\n\n  return (state) => {\n    const next = selector(state)\n    return shallow(prev.current, next)\n      ? (prev.current as U)\n      : (prev.current = next)\n  }\n}\n"],"names":[],"mappings":";;AAAgB,SAAA,OAAA,CAAW,MAAS,IAAS,EAAA;AAC3C,EAAA,IAAI,MAAO,CAAA,EAAA,CAAG,IAAM,EAAA,IAAI,CAAG,EAAA;AACzB,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AACA,EACE,IAAA,OAAO,SAAS,QAChB,IAAA,IAAA,KAAS,QACT,OAAO,IAAA,KAAS,QAChB,IAAA,IAAA,KAAS,IACT,EAAA;AACA,IAAO,OAAA,KAAA,CAAA;AAAA,GACT;AAEA,EAAI,IAAA,IAAA,YAAgB,GAAO,IAAA,IAAA,YAAgB,GAAK,EAAA;AAC9C,IAAI,IAAA,IAAA,CAAK,SAAS,IAAK,CAAA,IAAA;AAAM,MAAO,OAAA,KAAA,CAAA;AAEpC,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,CAAA,IAAK,IAAM,EAAA;AAC/B,MAAI,IAAA,CAAC,OAAO,EAAG,CAAA,KAAA,EAAO,KAAK,GAAI,CAAA,GAAG,CAAC,CAAG,EAAA;AACpC,QAAO,OAAA,KAAA,CAAA;AAAA,OACT;AAAA,KACF;AACA,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AAEA,EAAI,IAAA,IAAA,YAAgB,GAAO,IAAA,IAAA,YAAgB,GAAK,EAAA;AAC9C,IAAI,IAAA,IAAA,CAAK,SAAS,IAAK,CAAA,IAAA;AAAM,MAAO,OAAA,KAAA,CAAA;AAEpC,IAAA,KAAA,MAAW,SAAS,IAAM,EAAA;AACxB,MAAA,IAAI,CAAC,IAAA,CAAK,GAAI,CAAA,KAAK,CAAG,EAAA;AACpB,QAAO,OAAA,KAAA,CAAA;AAAA,OACT;AAAA,KACF;AACA,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AAEA,EAAM,MAAA,KAAA,GAAQ,MAAO,CAAA,IAAA,CAAK,IAAI,CAAA,CAAA;AAC9B,EAAA,IAAI,MAAM,MAAW,KAAA,MAAA,CAAO,IAAK,CAAA,IAAI,EAAE,MAAQ,EAAA;AAC7C,IAAO,OAAA,KAAA,CAAA;AAAA,GACT;AACA,EAAA,KAAA,IAAS,CAAI,GAAA,CAAA,EAAG,CAAI,GAAA,KAAA,CAAM,QAAQ,CAAK,EAAA,EAAA;AACrC,IACE,IAAA,CAAC,OAAO,SAAU,CAAA,cAAA,CAAe,KAAK,IAAM,EAAA,KAAA,CAAM,CAAC,CAAW,CAC9D,IAAA,CAAC,OAAO,EAAG,CAAA,IAAA,CAAK,KAAM,CAAA,CAAC,CAAY,CAAA,EAAG,KAAK,KAAM,CAAA,CAAC,CAAY,CAAC,CAC/D,EAAA;AACA,MAAO,OAAA,KAAA,CAAA;AAAA,KACT;AAAA,GACF;AACA,EAAO,OAAA,IAAA,CAAA;AACT;;ACzCA,MAAM,EAAE,QAAW,GAAA,YAAA,CAAA;AAEZ,SAAS,WAAiB,QAA4C,EAAA;AAC3E,EAAA,MAAM,OAAO,MAAU,EAAA,CAAA;AAEvB,EAAA,OAAO,CAAC,KAAU,KAAA;AAChB,IAAM,MAAA,IAAA,GAAO,SAAS,KAAK,CAAA,CAAA;AAC3B,IAAO,OAAA,OAAA,CAAQ,KAAK,OAAS,EAAA,IAAI,IAC5B,IAAK,CAAA,OAAA,GACL,KAAK,OAAU,GAAA,IAAA,CAAA;AAAA,GACtB,CAAA;AACF;;;;"}